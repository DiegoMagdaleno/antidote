#!/usr/bin/env zsh

### Clone a git repo containing a Zsh plugin.

local bundle=$1
local branch=$2
local giturl=$(_antidote_tourl $bundle)
local bundledir=$(_antidote_bundledir $giturl)

if [[ ! -d $bundledir ]]; then
  [[ -z "$branch" ]] || branch="--branch=$branch"
  # TODO: Verify that we can output "cloning bundle..." to stderr without breaking anything
  # echo >&2 "# cloning $bundle..."
  _antidote_gitclone --quiet --depth 1 --recurse-submodules --shallow-submodules $branch $giturl $bundledir
fi
