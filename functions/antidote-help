#!/usr/bin/env zsh

### Show antidote documentation.
###
### usage: antidote [-h|--help] [<command>]
###        antidote help [<command>]

local usage=(
  'antidote - the cure to slow zsh plugin management'
  ''
  'usage: antidote [-h|--help] [-v|--version]'
  '       antidote <command> [<flags>] [<args>...]'
  ''
  'commands: bundle, home, init, install, list, load, path,'
  '          purge, update'
)

local o_help
zparseopts -D -F -K -- \
  {h,-help}=o_help ||
  return 1

local manpage=antidote

if (( $#o_help )); then
  manpage=antidote-help
elif [[ "$1" == bundles ]]; then
  manpage="antidote-bundle"
elif [[ -n "$1" ]]; then
  manpage="antidote-${1}"
fi

man "$manpage" || {
  printf "%s\n" "${(@)usage}" && return 1
}
