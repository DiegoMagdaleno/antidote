#!/usr/bin/env zsh

### Get the path to a plugin's init file.

emulate -L zsh
setopt local_options extended_glob

REPLY=()
local dir=$1
if [[ ! -d "$dir" ]]; then
  echo >&2 "antidote: bundle directory not found '$dir'."
  return 1
fi

local initfiles=($dir/*.plugin.zsh(N))
[[ $#initfiles -gt 0 ]] || initfiles=($dir/*.zsh(N))
[[ $#initfiles -gt 0 ]] || initfiles=($dir/*.sh(N))
[[ $#initfiles -gt 0 ]] || initfiles=($dir/*.zsh-theme(N))

if [[ $#initfiles -eq 0 ]]; then
  echo >&2 "antidote: no init file detected in '$dir'."
  return 1
fi
REPLY=($initfiles)
local f
for f in $initfiles; do
  echo $f
done
